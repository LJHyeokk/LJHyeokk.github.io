---
layout: single
classes: wide
title: "ORM & Prisma"

author_profile: ture
---

## ORM ğŸ™€

<center>ORM : Object-relational-mappingì˜ ì•½ì–´ë¡œ ê°ì²´ì™€ ê´€ê³„í˜• ë°ì´í„°ë² ì´ìŠ¤ì˜ ë°ì´í„°ë¥¼ ìë™ìœ¼ë¡œ ë§¤í•‘(ì—°ê²°)í•´ì£¼ëŠ” ê²ƒì´ë‹¤.</center>
{: .notice--danger}

<center>ë°ì´í„°ë² ì´ìŠ¤ ë°ì´í„° â¬…ï¸ ë§¤í•‘ â¡ï¸ Object í•„ë“œ</center>
{: .notice--danger}

```javascript
class User extends Model {}
User.init(
  {
    username: DataTypes.STRING,
    birthday: DataTypes.DATE,
  },
  { sequelize, modelName: "user" }
);
```

ORM ì¤‘ í•˜ë‚˜ì¸ `sequelize` ì˜ ë¬¸ë²•ì´ë‹¤.

username, birtdayë¼ëŠ” ì†ì„±ì´ ìˆìœ¼ë©° ì´ê²ƒë“¤ì˜ ë°ì´í„°íƒ€ì…ì€ ê°ê° stringê³¼ dateë‹¤.

ì´ê²ƒì€ databaseê´€ì ìœ¼ë¡œ username, birtdayë¼ëŠ” fieldê°€ ìˆê³  stringê³¼ dateì˜ íƒ€ì…ì„ ê°€ì§„ë‹¤ê³  ìƒê°í•˜ë©´ëœë‹¤.

<br>

<center>Migrations : ì½”ë“œë¡œ ì‘ì„±í•œ í´ë˜ìŠ¤ë¥¼ ì‹¤ì œ ë°ì´í„°ë² ì´ìŠ¤ì— í…Œì´ë¸”ë¡œ ì˜®ê¸°ëŠ” ê³¼ì •</center>
{: .notice--danger}

ëª¨ë¸ì„ ìƒì„±í•˜ë©´ ORMì´ migration íŒŒì¼ì„ ìƒì„±í•˜ê³ , migration íŒŒì¼ì´ ë°ì´í„°ë² ì´ìŠ¤ì— ì ìš©ëœë‹¤. ORMì—ì„œëŠ” ë°ì´í„°ë² ì´ìŠ¤ì˜ êµ¬ì¡°ë¥¼ migration fileë“¤ì„ í†µí•´ ì£¼ë¡œ ê´€ë¦¬í•¨

## Prisma ğŸ™€

<center>Prisma : nodejsí™˜ê²½ì—ì„œ ë°ì´í„°ë² ì´ìŠ¤ì— ëŒ€í•œ ì ‘ê·¼ì„ ì‰½ê²Œ ë„ì™€ì£¼ëŠ” ì†Œí”„íŠ¸ì›¨ì–´ë¡œ ê¸°ì¡´ì˜ ORMë“¤ê³¼ëŠ” ë‹¤ë¥´ê²Œ GraphQLë¥¼ ì‚¬ìš©í•˜ì—¬ ê²©ì´ë‹¤ë¥¸ ìƒì‚°ì„±ì„ ë³´ì—¬ì¤€ë‹¤.</center>
{: .notice--danger}

<center>Prismaë¥¼ ë‹¤ìš´ë°›ê³  í™œìš©í•´ë³´ì</center>

<br>

`npm install prisma --save-dev` â¡ï¸ ì„¤ì¹˜

`npm install @prisma/client --save` â¡ï¸ ì„¤ì¹˜

`npm install dotenv -D` â¡ï¸ í™˜ê²½ë³€ìˆ˜ ì‚¬ìš©ê°€ëŠ¥

`npx prisma` â¡ï¸ ì˜ê¹”ë ¸ìœ¼ë©´ ëª…ë ¹ì–´ ë‚˜ì˜´

`npx prisma init` â¡ï¸ ì´ˆê¸°ì…‹íŒ… ëª…ë ¹ì–´

```java
datasource db {
  provider = "mysql"
  url      = env("DATABASE_URL")
}
```

<center>mysqlë¡œ ë°”ê¿”ì£¼ê¸°</center>

```java
DATABASE_URL="mysql://root:ë¹„ë°€ë²ˆí˜¸@localhost:3306/prisma"
```

<center>.envì—ì„œ urlë°”ê¿”ì£¼ê¸°</center>

<br >

`SHOW GLOBAL VARIABLES LIKE 'PORT';` â¡ï¸ mysqlì—ì„œ portë²ˆí˜¸ ì°¾ê¸°

`npx prisma migrate dev --name init` â¡ï¸ schema.prismaì—ì„œ tableì„ ë§Œë“¤ê³ ë‚˜ì„œ ëª…ë ¹ì–´ì‹¤í–‰í•˜ë©´ dbì— ì—°ë™ë¨

<br>

```java
model categories {
  id     Int      @id @default(autoincrement())
  name   String
  drinks drinks[]
}

model drinks {
  id            Int             @id @default(autoincrement())
  korean_name   String
  english_name  String
  drink_info    String
  is_new        Boolean
  category_id   Int
  categories    categories      @relation(fields: [category_id], references: [id])
  likeBool      likeBool[]
  images        images[]
  allergy_drink allergy_drink[]
  nutrients     nutrients[]
}

model users {
  id            Int     @id @default(autoincrement())
  email         String  @unique
  password      String
  username      String?
  address       String?
  phone_number  String?
  policy_agreed Boolean @default(true)
}
```

<center>prisma objectë¡œ tableìƒì„±</center>

<br>

npm i -D prettier-plugin-prisma

ëª…ë ¹ì–´ë¥¼ ì‚¬ìš©í•˜ì—¬ ì„¤ì¹˜í•˜ë©´ ì°¸ì¡°ë‹¹í•˜ëŠ” ê³³ì—

'ì°¸ì¡°í•˜ëŠ” í…Œì´ë¸”' 'ì°¸ì¡°í•˜ëŠ” í…Œì´ë¸”' [] ì´ë¼ê³  ì“°ë©´ ìë™ìœ¼ë¡œ FKê°€ ì„¤ì •ëœë‹¤..
