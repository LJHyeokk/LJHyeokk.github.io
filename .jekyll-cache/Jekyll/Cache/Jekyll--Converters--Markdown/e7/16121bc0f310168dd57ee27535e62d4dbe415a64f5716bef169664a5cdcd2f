I"e<h2 id="orm-">ORM ğŸ™€</h2>

<center class="notice--danger">ORM : Object-relational-mappingì˜ ì•½ì–´ë¡œ ê°ì²´ì™€ ê´€ê³„í˜• ë°ì´í„°ë² ì´ìŠ¤ì˜ ë°ì´í„°ë¥¼ ìë™ìœ¼ë¡œ ë§¤í•‘(ì—°ê²°)í•´ì£¼ëŠ” ê²ƒì´ë‹¤.</center>

<center class="notice--danger">ë°ì´í„°ë² ì´ìŠ¤ ë°ì´í„° â¬…ï¸ ë§¤í•‘ â¡ï¸ Object í•„ë“œ</center>

<div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">class</span> <span class="nx">User</span> <span class="kd">extends</span> <span class="nx">Model</span> <span class="p">{}</span>
<span class="nx">User</span><span class="p">.</span><span class="nx">init</span><span class="p">(</span>
  <span class="p">{</span>
    <span class="na">username</span><span class="p">:</span> <span class="nx">DataTypes</span><span class="p">.</span><span class="nx">STRING</span><span class="p">,</span>
    <span class="na">birthday</span><span class="p">:</span> <span class="nx">DataTypes</span><span class="p">.</span><span class="nx">DATE</span><span class="p">,</span>
  <span class="p">},</span>
  <span class="p">{</span> <span class="nx">sequelize</span><span class="p">,</span> <span class="na">modelName</span><span class="p">:</span> <span class="dl">"</span><span class="s2">user</span><span class="dl">"</span> <span class="p">}</span>
<span class="p">);</span>
</code></pre></div></div>

<p>ORM ì¤‘ í•˜ë‚˜ì¸ <code class="language-plaintext highlighter-rouge">sequelize</code> ì˜ ë¬¸ë²•ì´ë‹¤.</p>

<p>username, birtdayë¼ëŠ” ì†ì„±ì´ ìˆìœ¼ë©° ì´ê²ƒë“¤ì˜ ë°ì´í„°íƒ€ì…ì€ ê°ê° stringê³¼ dateë‹¤.</p>

<p>ì´ê²ƒì€ databaseê´€ì ìœ¼ë¡œ username, birtdayë¼ëŠ” fieldê°€ ìˆê³  stringê³¼ dateì˜ íƒ€ì…ì„ ê°€ì§„ë‹¤ê³  ìƒê°í•˜ë©´ëœë‹¤.</p>

<p><br /></p>

<center class="notice--danger">Migrations : ì½”ë“œë¡œ ì‘ì„±í•œ í´ë˜ìŠ¤ë¥¼ ì‹¤ì œ ë°ì´í„°ë² ì´ìŠ¤ì— í…Œì´ë¸”ë¡œ ì˜®ê¸°ëŠ” ê³¼ì •</center>

<p>ëª¨ë¸ì„ ìƒì„±í•˜ë©´ ORMì´ migration íŒŒì¼ì„ ìƒì„±í•˜ê³ , migration íŒŒì¼ì´ ë°ì´í„°ë² ì´ìŠ¤ì— ì ìš©ëœë‹¤. ORMì—ì„œëŠ” ë°ì´í„°ë² ì´ìŠ¤ì˜ êµ¬ì¡°ë¥¼ migration fileë“¤ì„ í†µí•´ ì£¼ë¡œ ê´€ë¦¬í•¨</p>

<h2 id="prisma-">Prisma ğŸ™€</h2>

<center class="notice--danger">Prisma : nodejsí™˜ê²½ì—ì„œ ë°ì´í„°ë² ì´ìŠ¤ì— ëŒ€í•œ ì ‘ê·¼ì„ ì‰½ê²Œ ë„ì™€ì£¼ëŠ” ì†Œí”„íŠ¸ì›¨ì–´ë¡œ ê¸°ì¡´ì˜ ORMë“¤ê³¼ëŠ” ë‹¤ë¥´ê²Œ GraphQLë¥¼ ì‚¬ìš©í•˜ì—¬ ê²©ì´ë‹¤ë¥¸ ìƒì‚°ì„±ì„ ë³´ì—¬ì¤€ë‹¤.</center>

<center>Prismaë¥¼ ë‹¤ìš´ë°›ê³  í™œìš©í•´ë³´ì</center>

<p><br /></p>

<p><code class="language-plaintext highlighter-rouge">npm install prisma --save-dev</code> â¡ï¸ ì„¤ì¹˜</p>

<p><code class="language-plaintext highlighter-rouge">npm install @prisma/client --save</code> â¡ï¸ ì„¤ì¹˜</p>

<p><code class="language-plaintext highlighter-rouge">npm install dotenv -D</code> â¡ï¸ í™˜ê²½ë³€ìˆ˜ ì‚¬ìš©ê°€ëŠ¥</p>

<p><code class="language-plaintext highlighter-rouge">npx prisma</code> â¡ï¸ ì˜ê¹”ë ¸ìœ¼ë©´ ëª…ë ¹ì–´ ë‚˜ì˜´</p>

<p><code class="language-plaintext highlighter-rouge">npx prisma init</code> â¡ï¸ ì´ˆê¸°ì…‹íŒ… ëª…ë ¹ì–´</p>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">datasource</span> <span class="n">db</span> <span class="o">{</span>
  <span class="n">provider</span> <span class="o">=</span> <span class="s">"mysql"</span>
  <span class="n">url</span>      <span class="o">=</span> <span class="n">env</span><span class="o">(</span><span class="s">"DATABASE_URL"</span><span class="o">)</span>
<span class="o">}</span>
</code></pre></div></div>

<center>mysqlë¡œ ë°”ê¿”ì£¼ê¸°</center>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="no">DATABASE_URL</span><span class="o">=</span><span class="s">"mysql://root:ë¹„ë°€ë²ˆí˜¸@localhost:3306/prisma"</span>
</code></pre></div></div>

<center>.envì—ì„œ urlë°”ê¿”ì£¼ê¸°</center>

<p><br /></p>

<p><code class="language-plaintext highlighter-rouge">SHOW GLOBAL VARIABLES LIKE 'PORT';</code> â¡ï¸ mysqlì—ì„œ portë²ˆí˜¸ ì°¾ê¸°</p>

<p><code class="language-plaintext highlighter-rouge">npx prisma migrate dev --name init</code> â¡ï¸ schema.prismaì—ì„œ tableì„ ë§Œë“¤ê³ ë‚˜ì„œ ëª…ë ¹ì–´ì‹¤í–‰í•˜ë©´ dbì— ì—°ë™ë¨</p>

<p><br /></p>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">model</span> <span class="n">categories</span> <span class="o">{</span>
  <span class="n">id</span>     <span class="nc">Int</span>      <span class="nd">@id</span> <span class="nd">@default</span><span class="o">(</span><span class="n">autoincrement</span><span class="o">())</span>
  <span class="n">name</span>   <span class="nc">String</span>
  <span class="n">drinks</span> <span class="n">drinks</span><span class="o">[]</span>
<span class="o">}</span>

<span class="n">model</span> <span class="n">drinks</span> <span class="o">{</span>
  <span class="n">id</span>            <span class="nc">Int</span>             <span class="nd">@id</span> <span class="nd">@default</span><span class="o">(</span><span class="n">autoincrement</span><span class="o">())</span>
  <span class="n">korean_name</span>   <span class="nc">String</span>
  <span class="n">english_name</span>  <span class="nc">String</span>
  <span class="n">drink_info</span>    <span class="nc">String</span>
  <span class="n">is_new</span>        <span class="nc">Boolean</span>
  <span class="n">category_id</span>   <span class="nc">Int</span>
  <span class="n">categories</span>    <span class="n">categories</span>      <span class="nd">@relation</span><span class="o">(</span><span class="nl">fields:</span> <span class="o">[</span><span class="n">category_id</span><span class="o">],</span> <span class="nl">references:</span> <span class="o">[</span><span class="n">id</span><span class="o">])</span>
  <span class="n">likeBool</span>      <span class="n">likeBool</span><span class="o">[]</span>
  <span class="n">images</span>        <span class="n">images</span><span class="o">[]</span>
  <span class="n">allergy_drink</span> <span class="n">allergy_drink</span><span class="o">[]</span>
  <span class="n">nutrients</span>     <span class="n">nutrients</span><span class="o">[]</span>
<span class="o">}</span>

<span class="n">model</span> <span class="n">users</span> <span class="o">{</span>
  <span class="n">id</span>            <span class="nc">Int</span>     <span class="nd">@id</span> <span class="nd">@default</span><span class="o">(</span><span class="n">autoincrement</span><span class="o">())</span>
  <span class="n">email</span>         <span class="nc">String</span>  <span class="nd">@unique</span>
  <span class="n">password</span>      <span class="nc">String</span>
  <span class="n">username</span>      <span class="nc">String</span><span class="o">?</span>
  <span class="n">address</span>       <span class="nc">String</span><span class="o">?</span>
  <span class="n">phone_number</span>  <span class="nc">String</span><span class="o">?</span>
  <span class="n">policy_agreed</span> <span class="nc">Boolean</span> <span class="nd">@default</span><span class="o">(</span><span class="kc">true</span><span class="o">)</span>
<span class="o">}</span>
</code></pre></div></div>

<center>prisma objectë¡œ tableìƒì„±</center>

<p><br /></p>

<p>npm i -D prettier-plugin-prisma</p>

<p>ëª…ë ¹ì–´ë¥¼ ì‚¬ìš©í•˜ì—¬ ì„¤ì¹˜í•˜ë©´ ì°¸ì¡°ë‹¹í•˜ëŠ” ê³³ì—</p>

<p>â€˜ì°¸ì¡°í•˜ëŠ” í…Œì´ë¸”â€™ â€˜ì°¸ì¡°í•˜ëŠ” í…Œì´ë¸”â€™ [] ì´ë¼ê³  ì“°ë©´ ìë™ìœ¼ë¡œ FKê°€ ì„¤ì •ëœë‹¤..</p>
:ET