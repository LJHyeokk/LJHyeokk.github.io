I"	<h2 id="elastic-load-balancer-">Elastic Load Balancer? 🍪</h2>

<center class="notice--danger">  Elastic Load Balancer : 들어오는 애플리케이션 트래픽을 Amazon EC2인스턴스, 컨테이너, IP주소, Lambda 함수와 같은 여러 대상에 자동으로 분산시킨다.</center>

<ul>
  <li>
    <p>다수의 서비스에 트래픽을 분산 시켜주는 서비스</p>
  </li>
  <li>
    <p>Health Check : 직접 트래픽을 발생시켜 살아있는지 확인함</p>
  </li>
  <li>
    <p>Autoscaling과 연동 가능</p>
  </li>
  <li>
    <p>여러 가용영역에 분산 가능</p>
  </li>
  <li>
    <p>지속적으로 IP가 바뀌어 IP고정 불가능 : 항상 도메인 기반 사용</p>
  </li>
  <li>
    <p>Application Load Balancer : 어플리케이션 레벨에서 동작 ( 똑똑함 )</p>
  </li>
  <li>
    <p>Network Load Balaner : 네트워크 레벨에서 동작, TCP기반, Elastic IP할당 가능 ( 빠름 )</p>
  </li>
  <li>
    <p>Class Load Balaner : 옛날에사용</p>
  </li>
  <li>
    <p>Gateway Load Balaner : 먼저 트래픽을 체크함, 가상어플리케이션 배포/확장 관리를 위한 서비스</p>
  </li>
</ul>

<p><br /></p>
<hr />

<p><br /></p>

<h3 id="target-group">Target Group</h3>

<ul>
  <li>
    <p>ALB가 라우팅할 대상의 집합</p>
  </li>
  <li>
    <p>Instance, IP(private), lambda, ALB</p>
  </li>
</ul>

<p><br /></p>
<hr />

<p><br /></p>

<h3 id="사용해보기">사용해보기</h3>

<p><br /></p>

<p>이미 만들어놓은 로드밸런서를 사용하기 위해 기존의 1번 인스턴스에 더해 2번 인스턴스를 만들어보았다.</p>

<p><br /></p>
<center><img src="../images/2021-10-27-first/alb-2.png" alt="alb-2" /></center>
<p><br /></p>

<p>1번 인스턴스 : Docker[redis], Docker[nodejs-server]</p>

<p>2번 인스턴스 : Docker[nodejs-server]</p>

<p>여러개의 서버에서 채팅이 잘 연결되는지 확인하기위한</p>

<p>실험용으로 로드밸런서를 사용하려고 만든거라 구조가 조금 이상하다.(이해바람)</p>

<p><br /></p>

<p>추후 제대로 배포를 한다면</p>

<p>1번 인스턴스 : Docker[redis]</p>

<p>2번 인스턴스 : Docker[nodejs-server]</p>

<p>3번 인스턴스 : Docker[nodejs-server]</p>

<p>이렇게 쭉쭉 만들어서 1번 인스턴스를 제외한 나머지만 target group으로 만들어 로드밸런서를 돌리는게 나을것같다.</p>

<p>(그러면 1번 인스턴스만 메모리를 크게 설정하면 되기때문)</p>
:ET